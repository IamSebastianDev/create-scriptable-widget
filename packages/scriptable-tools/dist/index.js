"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=(e="follow",t)=>{switch(e){case"follow":return t;case"error":throw new Error("CWS-Fetch: The request was redirected. Aborting with error.");case"manual":break;default:throw new Error(`CWS-Fetch: '${e} 'is not recognized as a valid redirect methid. Set method to 'follow', 'error' or 'manual'`)}},t=async(t,o)=>new Promise((async r=>{const a=new Request(t);a.method=o.method||"GET",a.headers=o.headers,a.body=o.body,a.redirect=e.bind(null,o.redirect),a.allowInsecureRequest=o.allowInsecureRequest||!1;r(await a.load())})),o=async e=>{if(!HOSTNAME||"string"!=typeof HOSTNAME)return;const{type:o,data:r}=e;0===r.optionalParams.length&&delete r.optionalParams;const a={type:o,data:r.optionalParams?r:r.message},s="http://"+HOSTNAME+"/socket";await t(s,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(a)})},r={log:(e,...t)=>{console.log(e,...t),o({type:"log",data:{message:e,optionalParams:t}})},warn:(e,...t)=>{console.warn(e,...t),o({type:"warn",data:{message:e,optionalParams:t}})},error:(e,...t)=>{console.error(e,...t),o({type:"error",data:{message:e,optionalParams:t}})}};exports.fetch=t,exports.remote=r;
//# sourceMappingURL=index.js.map
